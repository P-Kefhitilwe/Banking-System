<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Insets?>

<VBox xmlns="http://javafx.com/javafx/21.0.6" xmlns:fx="http://javafx.com/fxml"
      fx:controller="banking.controller.TransactionController"
      spacing="24" styleClass="container" stylesheets="@../css/banking-styles.css"
      prefWidth="1000" prefHeight="800">

    <VBox styleClass="card" spacing="24">
        <padding>
            <Insets top="32" left="32" right="32" bottom="32"/>
        </padding>

        <Label text="Manage Transactions" styleClass="header-large"/>

        <HBox spacing="24">
            <!-- Transaction Form -->
            <VBox spacing="16" HBox.hgrow="ALWAYS" prefWidth="450">
                <VBox spacing="8">
                    <Label text="From Account" style="-fx-font-weight: 600;"/>
                    <ComboBox fx:id="accountCombo" prefWidth="450" prefHeight="40"/>
                </VBox>

                <VBox spacing="8">
                    <Label text="Transaction Type" style="-fx-font-weight: 600;"/>
                    <ComboBox fx:id="transactionTypeCombo" prefWidth="450" prefHeight="40"/>
                </VBox>

                <!-- Target Account (Only visible for Transfer) -->
                <VBox fx:id="targetAccountBox" spacing="8" visible="false" managed="false">
                    <Label text="Transfer To Account" style="-fx-font-weight: 600;"/>
                    <ComboBox fx:id="targetAccountCombo" prefWidth="450" prefHeight="40"/>
                </VBox>

                <VBox spacing="8">
                    <Label text="Amount (BWP)" style="-fx-font-weight: 600;"/>
                    <TextField fx:id="amountField" promptText="100.00" prefWidth="450" prefHeight="40"/>
                </VBox>

                <HBox spacing="12">
                    <Button text="Execute Transaction" onAction="#handleTransaction"
                            styleClass="button-success" prefHeight="45" prefWidth="180"/>
                    <Button text="Back to Dashboard" onAction="#handleBack"
                            styleClass="button-secondary" prefHeight="45" prefWidth="180"/>
                </HBox>

                <Label fx:id="messageLabel" wrapText="true" maxWidth="450"/>
            </VBox>

            <!-- Account Info Card -->
            <VBox styleClass="balance-card" spacing="12" prefWidth="320">
                <padding>
                    <Insets top="24" left="24" right="24" bottom="24"/>
                </padding>
                <Label text="Current Balance" style="-fx-font-size: 14px; -fx-text-fill: rgba(255,255,255,0.9);"/>
                <Label fx:id="balanceLabel" text="BWP 0.00" styleClass="balance-amount"/>
                <Separator style="-fx-background-color: rgba(255,255,255,0.3);"/>
                <Label fx:id="accountInfoLabel" text="Select an account"
                       style="-fx-font-size: 13px; -fx-text-fill: rgba(255,255,255,0.9);" wrapText="true"/>
            </VBox>
        </HBox>

        <!-- Transaction History -->
        <VBox spacing="12">
            <Label text="Recent Transactions" styleClass="header-small"/>
            <TableView fx:id="transactionsTable" prefHeight="250">
                <columns>
                    <TableColumn fx:id="dateColumn" text="Date" prefWidth="180"/>
                    <TableColumn fx:id="typeColumn" text="Type" prefWidth="140"/>
                    <TableColumn fx:id="amountColumn" text="Amount" prefWidth="130"/>
                    <TableColumn fx:id="balanceAfterColumn" text="Balance After" prefWidth="140"/>
                    <TableColumn fx:id="descriptionColumn" text="Description" prefWidth="250"/>
                </columns>
            </TableView>
        </VBox>
    </VBox>
</VBox>
